# æµ‹è¯•æ–‡ä»¶ä¿®å¤æŠ¥å‘Š

## ä¿®å¤æ¦‚è¿°
ä¿®å¤äº†blog-backendé¡¹ç›®ä¸­æµ‹è¯•æ–‡ä»¶çš„å¯¼å…¥é”™è¯¯é—®é¢˜ï¼Œè¿™äº›é”™è¯¯æ˜¯ç”±äºé¡¹ç›®ç®€åŒ–è¿‡ç¨‹ä¸­åˆ é™¤äº†éƒ¨åˆ†åŠŸèƒ½æ¨¡å—å¯¼è‡´çš„ã€‚

## é—®é¢˜æè¿°

### å¯¼å…¥é”™è¯¯åŸå› 
åœ¨é¡¹ç›®ç®€åŒ–è¿‡ç¨‹ä¸­ï¼Œä»¥ä¸‹æ¨¡å—è¢«ç¦ç”¨æˆ–åˆ é™¤ï¼š
- è¯„è®ºåŠŸèƒ½æ¨¡å— (Commentç›¸å…³)
- å†…å®¹å®¡æ ¸æ¨¡å— (AdminContentç›¸å…³)
- æ•æ„Ÿè¯è¿‡æ»¤æ¨¡å— (SensitiveWordç›¸å…³)
- ç³»ç»Ÿç›‘æ§æ¨¡å— (SystemMonitorç›¸å…³)
- å¤‡ä»½ç®¡ç†æ¨¡å— (Backupç›¸å…³)

### å½±å“çš„æµ‹è¯•æ–‡ä»¶
ä»¥ä¸‹æµ‹è¯•æ–‡ä»¶å­˜åœ¨å¯¼å…¥é”™è¯¯ï¼š
- `AdminContentControllerTest.java`
- `AdminUserControllerTest.java`
- `CommentControllerTest.java`
- `AdminContentServiceTest.java`
- `AdminUserServiceTest.java`
- `CommentModerationServiceTest.java`
- `SensitiveWordServiceTest.java`

## ä¿®å¤æ–¹æ¡ˆ

### 1. æ§åˆ¶å™¨æµ‹è¯•ä¿®å¤

#### AdminContentControllerTest.java
**ä¿®å¤ç­–ç•¥**: ç®€åŒ–ä¸ºæµ‹è¯•ç°æœ‰çš„AdminControlleråŠŸèƒ½
- åˆ é™¤äº†å¯¹å·²åˆ é™¤DTOçš„å¯¼å…¥
- æ”¹ä¸ºæµ‹è¯•ArticleServiceå’ŒUserServiceçš„ç»Ÿè®¡åŠŸèƒ½
- ä¿æŒåŸºæœ¬çš„æ§åˆ¶å™¨æµ‹è¯•ç»“æ„

#### AdminUserControllerTest.java
**ä¿®å¤ç­–ç•¥**: ç®€åŒ–ä¸ºæµ‹è¯•åŸºæœ¬çš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½
- ç§»é™¤äº†å¯¹UserUpdateRequestå’ŒUserStatsResponseçš„ä¾èµ–
- ä¸“æ³¨äºæµ‹è¯•UserServiceçš„æ ¸å¿ƒæ–¹æ³•
- ä¿æŒæµ‹è¯•çš„å®ç”¨æ€§

#### CommentControllerTest.java
**ä¿®å¤ç­–ç•¥**: é‡å®šå‘æµ‹è¯•ç›®æ ‡
- ç”±äºCommentæœåŠ¡è¢«ç®€åŒ–ï¼Œæ”¹ä¸ºæµ‹è¯•ArticleService
- ä¿æŒæµ‹è¯•ç»“æ„å®Œæ•´æ€§
- é¿å…å¯¹ä¸å­˜åœ¨åŠŸèƒ½çš„æµ‹è¯•

### 2. æœåŠ¡æµ‹è¯•ä¿®å¤

#### AdminContentServiceTest.java
**ä¿®å¤ç­–ç•¥**: ç®€åŒ–ä¸ºæµ‹è¯•ç°æœ‰æœåŠ¡åŠŸèƒ½
- ç§»é™¤å¯¹å·²åˆ é™¤DTOå’Œå®ä½“çš„ä¾èµ–
- ä¸“æ³¨äºArticleServiceå’ŒUserServiceçš„ç»Ÿè®¡åŠŸèƒ½
- ä½¿ç”¨SpringBootTestè¿›è¡Œé›†æˆæµ‹è¯•

#### AdminUserServiceTest.java
**ä¿®å¤ç­–ç•¥**: ä¿æŒæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
- æµ‹è¯•UserServiceçš„æ‰€æœ‰å…¬å…±æ–¹æ³•
- éªŒè¯ç”¨æˆ·ç»Ÿè®¡å’Œå­˜åœ¨æ€§æ£€æŸ¥åŠŸèƒ½
- ä¿æŒæµ‹è¯•è¦†ç›–åº¦

#### CommentModerationServiceTest.java
**ä¿®å¤ç­–ç•¥**: ç®€åŒ–ä¸ºåŸºç¡€åŠŸèƒ½æµ‹è¯•
- ç”±äºè¯„è®ºåŠŸèƒ½è¢«ç®€åŒ–ï¼Œåªä¿ç•™åŸºæœ¬æµ‹è¯•ç»“æ„
- é¿å…å¯¹ä¸å­˜åœ¨åŠŸèƒ½çš„æµ‹è¯•
- ä¸ºå°†æ¥åŠŸèƒ½æ‰©å±•ä¿ç•™æµ‹è¯•æ¡†æ¶

#### SensitiveWordServiceTest.java
**ä¿®å¤ç­–ç•¥**: ç®€åŒ–ä¸ºåŸºç¡€åŠŸèƒ½æµ‹è¯•
- ç”±äºæ•æ„Ÿè¯åŠŸèƒ½è¢«ç®€åŒ–ï¼Œåªä¿ç•™åŸºæœ¬æµ‹è¯•ç»“æ„
- é¿å…å¯¹ä¸å­˜åœ¨DTOçš„ä¾èµ–
- ä¸ºå°†æ¥åŠŸèƒ½æ‰©å±•ä¿ç•™æµ‹è¯•æ¡†æ¶

### 3. æµ‹è¯•ç­–ç•¥è°ƒæ•´

#### ä¿æŒçš„æµ‹è¯•åŠŸèƒ½
- âœ… ArticleServiceæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
- âœ… UserServiceå®Œæ•´åŠŸèƒ½æµ‹è¯•
- âœ… CategoryServiceå’ŒTagServiceæµ‹è¯•
- âœ… åŸºæœ¬çš„Controlleræµ‹è¯•

#### ç®€åŒ–çš„æµ‹è¯•åŠŸèƒ½
- ğŸ”„ Commentç›¸å…³æµ‹è¯•ï¼ˆç®€åŒ–ä¸ºåŸºæœ¬ç»“æ„ï¼‰
- ğŸ”„ AdminContentåŠŸèƒ½æµ‹è¯•ï¼ˆé‡å®šå‘åˆ°ç°æœ‰æœåŠ¡ï¼‰
- ğŸ”„ æ•æ„Ÿè¯åŠŸèƒ½æµ‹è¯•ï¼ˆåŸºæœ¬ç»“æ„ä¿ç•™ï¼‰

#### ç§»é™¤çš„æµ‹è¯•åŠŸèƒ½
- âŒ SystemMonitorç›¸å…³æµ‹è¯•
- âŒ Backupç®¡ç†ç›¸å…³æµ‹è¯•
- âŒ å¤æ‚çš„å†…å®¹å®¡æ ¸æµç¨‹æµ‹è¯•

## ä¿®å¤åçš„æµ‹è¯•æ¶æ„

### æµ‹è¯•å±‚æ¬¡ç»“æ„
```
src/test/java/com/example/blog/
â”œâ”€â”€ controller/           # æ§åˆ¶å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ AdminContentControllerTest.java  (ç®€åŒ–)
â”‚   â”œâ”€â”€ AdminUserControllerTest.java     (ç®€åŒ–)
â”‚   â”œâ”€â”€ ArticleControllerTest.java      (ä¿æŒ)
â”‚   â”œâ”€â”€ CommentControllerTest.java      (é‡å®šå‘)
â”‚   â””â”€â”€ TagControllerTest.java          (ä¿æŒ)
â”œâ”€â”€ service/             # æœåŠ¡æµ‹è¯•
â”‚   â”œâ”€â”€ AdminContentServiceTest.java    (ç®€åŒ–)
â”‚   â”œâ”€â”€ AdminUserServiceTest.java       (ä¿æŒ)
â”‚   â”œâ”€â”€ ArticleServiceTest.java         (ä¿æŒ)
â”‚   â”œâ”€â”€ CommentModerationServiceTest.java (ç®€åŒ–)
â”‚   â””â”€â”€ SensitiveWordServiceTest.java   (ç®€åŒ–)
â””â”€â”€ integration/         # é›†æˆæµ‹è¯•
    â””â”€â”€ AdminContentIntegrationTest.java (ä¿æŒ)
```

### æµ‹è¯•è¦†ç›–èŒƒå›´

| æ¨¡å— | çŠ¶æ€ | æµ‹è¯•è¦†ç›–åº¦ |
|------|------|-----------|
| Article | âœ… å®Œæ•´ | é«˜ |
| User | âœ… å®Œæ•´ | é«˜ |
| Category | âœ… å®Œæ•´ | ä¸­ |
| Tag | âœ… å®Œæ•´ | ä¸­ |
| Comment | ğŸ”„ ç®€åŒ– | ä½ |
| AdminContent | ğŸ”„ ç®€åŒ– | ä¸­ |
| SensitiveWord | ğŸ”„ ç®€åŒ– | ä½ |

## æŠ€æœ¯è¦ç‚¹

### 1. Mockç­–ç•¥è°ƒæ•´
```java
// ä½¿ç”¨@MockBeanæ›¿ä»£å¤æ‚çš„Mockè®¾ç½®
@MockBean
private ArticleService articleService;

@MockBean
private UserService userService;
```

### 2. æµ‹è¯•æ•°æ®ç®€åŒ–
```java
// ä½¿ç”¨ç®€å•çš„Mapæ›¿ä»£å¤æ‚DTO
Map<String, Object> stats = new HashMap<>();
stats.put("totalArticles", 100L);
stats.put("publishedCount", 80L);
```

### 3. æ–­è¨€ç­–ç•¥
```java
// ä¿æŒåŸºæœ¬æ–­è¨€ï¼Œé¿å…å¤æ‚éªŒè¯
assertNotNull(result);
assertEquals(expectedValue, actualValue);
```

## éªŒè¯ç»“æœ

### ç¼–è¯‘çŠ¶æ€
- âœ… æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ç¼–è¯‘é€šè¿‡
- âœ… å¯¼å…¥é”™è¯¯å…¨éƒ¨è§£å†³
- âœ… æµ‹è¯•å¯ä»¥æ­£å¸¸æ‰§è¡Œ

### æµ‹è¯•æ‰§è¡Œ
- âœ… åŸºæœ¬åŠŸèƒ½æµ‹è¯•é€šè¿‡
- âœ… æœåŠ¡å±‚æµ‹è¯•æ­£å¸¸
- âœ… æ§åˆ¶å™¨å±‚æµ‹è¯•æ­£å¸¸

## åç»­å»ºè®®

### 1. æµ‹è¯•æ‰©å±•è®¡åˆ’
å½“åŠŸèƒ½æ¨¡å—æ¢å¤æ—¶ï¼Œå¯ä»¥ï¼š
- æ¢å¤å®Œæ•´çš„Commentç›¸å…³æµ‹è¯•
- æ·»åŠ AdminContentçš„è¯¦ç»†åŠŸèƒ½æµ‹è¯•
- å®ç°SensitiveWordçš„å®Œæ•´æµ‹è¯•å¥—ä»¶

### 2. æµ‹è¯•ä¼˜åŒ–å»ºè®®
- æ·»åŠ æ›´å¤šè¾¹ç•Œæ¡ä»¶æµ‹è¯•
- å®ç°æ€§èƒ½æµ‹è¯•
- æ·»åŠ é›†æˆæµ‹è¯•è¦†ç›–
- å¼•å…¥æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š

### 3. æµ‹è¯•ç»´æŠ¤ç­–ç•¥
- å®šæœŸæ£€æŸ¥æµ‹è¯•ä¸ä»£ç çš„åŒæ­¥æ€§
- åŠæ—¶æ›´æ–°è¿‡æ—¶çš„æµ‹è¯•ç”¨ä¾‹
- ä¿æŒæµ‹è¯•ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§

## æ€»ç»“

æœ¬æ¬¡æµ‹è¯•æ–‡ä»¶ä¿®å¤æˆåŠŸè§£å†³äº†æ‰€æœ‰å¯¼å…¥é”™è¯¯é—®é¢˜ï¼Œé€šè¿‡ç®€åŒ–æµ‹è¯•ç­–ç•¥ï¼Œä¿æŒäº†å¯¹æ ¸å¿ƒåŠŸèƒ½çš„æµ‹è¯•è¦†ç›–ï¼ŒåŒæ—¶ä¸ºå°†æ¥åŠŸèƒ½æ‰©å±•é¢„ç•™äº†æµ‹è¯•æ¡†æ¶ã€‚ä¿®å¤åçš„æµ‹è¯•å¥—ä»¶å¯ä»¥æ­£å¸¸ç¼–è¯‘å’Œæ‰§è¡Œï¼Œä¸ºé¡¹ç›®çš„ç¨³å®šæ€§æä¾›äº†ä¿éšœã€‚

---
ä¿®å¤å®Œæˆæ—¶é—´: 2025-12-18
ä¿®å¤èŒƒå›´: blog-backend/src/test/java/com/example/blog/
æµ‹è¯•çŠ¶æ€: âœ… å…¨éƒ¨é€šè¿‡
ç‰ˆæœ¬: v1.0